<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="icon" type="image/png" href="favicon.png">
<title>QCWeb2 - experimental version</title>
<link rel="stylesheet" type="text/css" href="../src/qcweb2/qcweb2.css" />
<link rel="stylesheet" type="text/css" href=".styles/react-tabs.css" />
<style>
body {
  margin: 0px;
  padding: 0px;
  /* overflow: hidden; */
}
</style>
<script type="module">
import {
//  RealAlgebra,
//  Quasicrystal,
//  fromQCStrcInputs,
//  QCWeb2Experimental as QCWeb2,
  renderQCWeb2Below
} from './qcweb2.min.js'

// let rnum = new RealAlgebra(1e-10)

let qcw2

async function init () {
  /*
  const qc = await fetch('./kgy-bmmp.json')
    .then(response => response.text())
    .then(text => JSON.parse(text, Quasicrystal.reviver(rnum)))
  const mtau = -(1 + Math.sqrt(5)) / 2
  const lnum = qc._lnum
  // qc._phasonMatrix = lnum.sdiv(lnum.$(1, 0, 0, 0, 1, 0, 0, 0, 1).setDim(3, 3),
  //   (mtau ** 3))
  // delete qc._atomicSurface['m5']
  // delete qc._atomicSurface['mp5']
  const canvas = document.getElementById('canvas')
  canvas.width = 1024
  canvas.height = 768
  qcw2 = new QCWeb2(canvas, qc, {
    rCutParCartnMax: 7,
    colourRadiusTable: {
      'm0': [255, 0, 0, 255],
      'm5': [255, 255, 0, 255],
      'mp5': [0, 255, 0, 255],
      'mp0': [0, 255, 255, 255],
      'b0': [0, 0, 255, 255]
    }
  })
  qcw2.setMouseEvent()
  qcw2.setWheelEvent()
  const gl = qcw2.gl
  let [panel1, panel2] = qcw2.panelAt(400, 400).vsplit(600)
  let [panel11, panel12] = panel2.split(768 / 2)
  let [panel21, panel22] = panel12.vsplit(850)
  qcw2.setPanelTarget(panel1)
  qcw2.setPanelTarget(panel11, 0)
  qcw2.setPanelTarget(panel21, 2)
  qcw2.setPanelTarget(panel22, 1)
  qcw2.ui.showAtoms = true
  qcw2.ui.showODs = true
  qcw2.ui.showODsOnlyAsym = false

  canvas.addEventListener('mousemove', (evt) => {
    const info = qcw2.getInfoAt(...qcw2.canvasCoordOf(evt.clientX, evt.clientY))
    if (info) {
      // console.log(info)
    }
  })

  window.requestAnimationFrame(loop)
  window.removeEventListener('load', init)
  */

  renderQCWeb2Below(document.getElementById('qcweb2'))
}

// function loop () {
//   qcw2.update()
//   window.requestAnimationFrame(loop)
// }

window.addEventListener('load', init)
</script>

</head>
<body>

<div id="qcweb2" style="
  transform: rotate(0deg);
"></div>

</body>
</html>
